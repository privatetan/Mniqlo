version: '3.8'

services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      # Supabase Configuration
      - NEXT_PUBLIC_SUPABASE_URL=${NEXT_PUBLIC_SUPABASE_URL}
      - NEXT_PUBLIC_SUPABASE_ANON_KEY=${NEXT_PUBLIC_SUPABASE_ANON_KEY}
      
      # WeChat Official Account Configuration
      - WECHAT_APPID=${WECHAT_APPID}
      - WECHAT_APPSECRET=${WECHAT_APPSECRET}
      - WECHAT_TEMPLATE_ID=${WECHAT_TEMPLATE_ID}
      - WECHAT_BASE_URL=${WECHAT_BASE_URL}
    volumes:
      # Persistent database storage (for local SQLite if needed)
      - db-data:/app/data
    restart: unless-stopped

volumes:
  # Named volume for persistent data
  db-data:
    driver: local
